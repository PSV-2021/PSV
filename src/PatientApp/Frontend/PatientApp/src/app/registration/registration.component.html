<mat-toolbar color="warn">
  <div class="landing-header">{{pageTitle}}</div>
  <span class="spacer"></span>
  <button mat-raised-button (click)="login()">Login</button>
</mat-toolbar>
<div class="login-wrapper" fxLayout="row" fxLayoutAlign="center center">
  <mat-card class="box">
    <mat-card-header>
      <mat-card-title>Register</mat-card-title>
    </mat-card-header>
    <form #f="ngForm" [formGroup]="registerForm" class="example-form">
      <div class="example-container">
          <mat-form-field appearance="fill" class="width-100" >
            <mat-label>Name</mat-label>
            <input type="text" formControlName="name" matInput placeholder="" [(ngModel)]="patient.name" required/>
            <mat-error *ngIf="hasError('name', 'required')">Name is required</mat-error>
            <mat-error *ngIf="hasError('name', 'pattern')">Name must start with capital letter</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill" class="width-100">
            <mat-label>Surname</mat-label>
            <input type="text" formControlName="surname"  matInput placeholder=""  [(ngModel)]="patient.surname" required/>
            <mat-error *ngIf="hasError('surname', 'required')">Surname is required</mat-error>
            <mat-error *ngIf="hasError('surname', 'pattern')">Surname must start with capital letter</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill" class="width-100">
              <mat-label>Jmbg</mat-label>
              <input type="text" formControlName="jmbg" matInput placeholder=""  [(ngModel)]="patient.jmbg"  required/>
              <mat-error *ngIf="hasError('jmbg', 'required')">Jmbg is required</mat-error>
            </mat-form-field>
          <mat-form-field appearance="fill" class="width-100">
              <mat-label>Date of birth</mat-label>
              <input matInput formControlName="date" [matDatepicker]="picker"  [(ngModel)]="patient.date" required/>
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
              <mat-error *ngIf="hasError('date', 'required')">Date is required</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill" class="width-100">
              <mat-label>Father's name</mat-label>
              <input type="text" formControlName="father" matInput placeholder=""  [(ngModel)]="patient.fathersName" required/>
              <mat-error *ngIf="hasError('father', 'required')">Father's name is required</mat-error>
              <mat-error *ngIf="hasError('father', 'pattern')">Father's name must start with capital letter</mat-error>
            </mat-form-field>
          <mat-radio-group aria-label="Select sex" [(ngModel)]="patient.sex" [ngModelOptions]="{standalone: true}">
              <mat-radio-button [value]=0>Male</mat-radio-button>
              <mat-radio-button [value]=1>Female</mat-radio-button>
              <mat-radio-button [value]=2>Other</mat-radio-button>
          </mat-radio-group>
          <mat-form-field appearance="fill" class="width-100">
              <mat-label>Phone number</mat-label>
              <input type="text" formControlName="phone" matInput placeholder=""  [(ngModel)]="patient.phoneNumber" required/>
              <mat-error *ngIf="hasError('phone', 'required')">Phone is required</mat-error>
              <mat-error *ngIf="hasError('phone', 'pattern')">Phone number only has numbers</mat-error>
            </mat-form-field>
          <mat-form-field appearance="fill" class="width-100">
              <mat-label>Address</mat-label>
              <input type="text" formControlName="address" matInput placeholder=""  [(ngModel)]="patient.adress" required/>
              <mat-error *ngIf="hasError('address', 'required')">Address is required</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill" class="width-100">
            <mat-label>Email address</mat-label>
            <input type="text" formControlName="email" matInput placeholder=""  [(ngModel)]="patient.email" required/>
            <mat-error *ngIf="hasError('email', 'required')">Email is required</mat-error>
            <mat-error *ngIf="hasError('email', 'email')">Form is invalid</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill" class="width-100">
              <mat-label>Username</mat-label>
              <input type="text" formControlName="username" matInput placeholder=""  [(ngModel)]="patient.username" required/>
              <mat-error *ngIf="hasError('username', 'required')">Username is required</mat-error>
            </mat-form-field>
          <mat-form-field appearance="fill" class="width-100">
            <mat-label>Password</mat-label>
            <input [type]="hide ? 'password' : 'text'"  formControlName="password" matInput placeholder=""  [(ngModel)]="patient.password" required />
            <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
            <mat-error *ngIf="hasError('password', 'required')">Password is required</mat-error>
            <mat-error *ngIf="hasError('password', 'minlength')">Minimal 6 characters</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill" class="width-100">
              <mat-label>Repeat password</mat-label>
              <input [type]="hiderp ? 'password' : 'text'" formControlName="confirmPassword" matInput placeholder="" [(ngModel)]="patient.repeatPassword" required/>
              <mat-icon matSuffix (click)="hiderp = !hiderp">{{hiderp ? 'visibility_off' : 'visibility'}}</mat-icon>
              <mat-error *ngIf="hasError('confirmPassword', 'required')">Field is required</mat-error>
              <mat-error *ngIf="hasError('confirmPassword', 'mustMatch')">Must match password</mat-error>
            </mat-form-field>
          <mat-form-field appearance="fill" class="width-100">
              <mat-label>Blood type</mat-label>
              <mat-select formControlName="bloodType" [(ngModel)]="patient.bloodType" [ngModelOptions]="{standalone: true}" required>
                  <mat-option *ngFor="let type of types; let i=index" [value]="i">
                    {{type.value}}
                  </mat-option>
              </mat-select>
              <mat-error *ngIf="hasError('bloodType', 'required')">Blood type is required</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill" class="width-100">
              <mat-label>Chosen doctor</mat-label>
              <mat-select formControlName="doctor" [(ngModel)]="selectedDoctor.name" required>
                  <mat-option *ngFor="let doctor of doctors" [value]="doctor.nameAndSurname">
                    {{doctor.nameAndSurname}}
                  </mat-option>
              </mat-select>
              <mat-error *ngIf="hasError('doctor', 'required')">Doctor is required</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill" class="width-100">
              <mat-label>Allergens</mat-label>
              <mat-select [(ngModel)] = "allergens" [ngModelOptions]="{standalone: true}" multiple>
                  <mat-option *ngFor="let allergen of allergenList" [value]="allergen.name" >
                    {{allergen.name}}
                  </mat-option>
              </mat-select>
          </mat-form-field>
          </div>

      <button mat-stroked-button color="accent" class="btn-block" [disabled]="!f.valid" (click)="onSubmit()">Register</button>

    </form>
  </mat-card>
</div>

